define(["require","exports","tslib","external/react","modules/clean/ajax","modules/clean/react/modal","modules/core/i18n","modules/core/notify"],function(e,t,s,n,r,o,i,a){"use strict";var l=function(e){function t(t){var s=e.call(this,t)||this;return s.state={sent:!1,submitting:!1},s}return s.__extends(t,e),t.prototype.resetResponseSuccess=function(e){"OK"===e.status?(a.success(i._("Sent an email to %(email)s").format({email:this.props.email})),this.setState({sent:!0,submitting:this.state.submitting})):this.resetEmailError()},t.prototype.resetEmailError=function(){a.error(i._("Could not send email. Please try again"))},t.prototype.sendResetEmail=function(e){var t=this;e.preventDefault(),this.setState({sent:this.state.sent,submitting:!0}),r.FormWebRequest({url:"/ajax_reset_start",data:{email:this.props.email},success:function(e){return t.resetResponseSuccess(JSON.parse(e))},error:function(){return t.resetEmailError()},complete:function(){t.setState({sent:t.state.sent,submitting:!1})}})},t.prototype.userConfirmSetPassword=function(){this.props.onUserConfirm?this.props.onUserConfirm():o.Modal.close()},t.showInstance=function(e){o.Modal.showInstance(n.createElement(t,s.__assign({},e)))},t.prototype.render=function(){var e=this,t=i._("Dropbox will send an email to %(email)s with further instructions.\n    You may need to check your spam folder or unblock no-reply@dropbox.com.").format({email:this.props.email}),s=this.state.sent?i._("Resend email"):i._("Send email"),r=i._("Iâ€™ve set a password"),a=this.sendResetEmail.bind(this),l=this.userConfirmSetPassword.bind(this),u=n.createElement(o.ModalButtons,null,n.createElement(o.ModalButton,{importance:"primary",disabled:!this.state.sent,onClick:l},r),n.createElement(o.ModalButton,{importance:"tertiary",onClick:a},s));return n.createElement(o.Modal,{title:i._("Set Password"),onAccept:function(){return e.userConfirmSetPassword()},buttonComponent:u},n.createElement("p",null,this.props.reason),n.createElement("p",null,t))},t}(n.Component);t.SetPasswordModal=l});
//# sourceMappingURL=set_password_modal.min.js-vflJw13PA.map